{% extends "base.html" %}
{% block title %}
  {% if request.state.lang == 'en' %}
    âœ… Wi-Fi QR Result
  {% elif request.state.lang == 'ar' %}
    âœ… Ù†ØªÙŠØ¬Ø© QR Ø§Ù„ÙˆØ§ÙŠ ÙØ§ÙŠ
  {% else %}
    âœ… WLAN-QR-Code Ergebnis
  {% endif %}
{% endblock %}

{% block content %}
{% include "partials/qr_result_warnings.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set w_title = 'âœ… Wi-Fi QR code created!' %}
  {% set w_sub = 'Scan this code to connect to Wi-Fi automatically.' %}
  {% set w_ssid = 'SSID:' %}
  {% set w_encryption = 'Encryption:' %}
  {% set w_password = 'Password:' %}
  {% set w_dynamic = 'Dynamic link:' %}
  {% set w_open_link = 'ğŸ”— Open dynamic link' %}
  {% set w_download = 'â¬‡ï¸ Download QR code' %}
  {% set w_open_network = 'ğŸ”“ Open network' %}
  {% set w_print = 'ğŸ–¨ï¸ Print QR code' %}
{% elif lang == 'ar' %}
  {% set w_title = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR Ù„Ù„ÙˆØ§ÙŠ ÙØ§ÙŠ!' %}
  {% set w_sub = 'Ø§Ù…Ø³Ø­ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.' %}
  {% set w_ssid = 'Ø§Ø³Ù… Ø§Ù„Ø´Ø¨ÙƒØ©:' %}
  {% set w_encryption = 'Ø§Ù„ØªØ´ÙÙŠØ±:' %}
  {% set w_password = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:' %}
  {% set w_dynamic = 'Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ:' %}
  {% set w_open_link = 'ğŸ”— ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ' %}
  {% set w_download = 'â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„ QR' %}
  {% set w_open_network = 'ğŸ”“ Ø´Ø¨ÙƒØ© Ù…ÙØªÙˆØ­Ø©' %}
  {% set w_print = 'ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø±Ù…Ø² QR' %}
{% else %}
  {% set w_title = 'âœ… WLAN-QR-Code erstellt!' %}
  {% set w_sub = 'Scanne diesen Code, um dich automatisch mit dem WLAN zu verbinden.' %}
  {% set w_ssid = 'SSID:' %}
  {% set w_encryption = 'VerschlÃ¼sselung:' %}
  {% set w_password = 'Passwort:' %}
  {% set w_dynamic = 'Dynamischer Link:' %}
  {% set w_open_link = 'ğŸ”— Dynamischen Link Ã¶ffnen' %}
  {% set w_download = 'â¬‡ï¸ QR-Code herunterladen' %}
  {% set w_open_network = 'ğŸ”“ Offenes Netzwerk' %}
  {% set w_print = 'ğŸ–¨ï¸ QR-Code drucken' %}
{% endif %}
<section class="qr-result qr-result-unified">
  <h1>{{ w_title }}</h1>
  <p class="subtitle">{{ w_sub }}</p>

  <div class="qr-card">
    {% if qr_image %}
      <img src="data:image/png;base64,{{ qr_image }}" alt="QR-Code Vorschau" class="qr-preview">
    {% elif qr and qr.image_path %}
      <img src="/{{ qr.image_path }}" alt="QR-Code Vorschau" class="qr-preview">
    {% endif %}

    <div class="qr-info">
      <p><strong>{{ w_ssid }}</strong> {{ ssid }}</p>
      <p><strong>{{ w_encryption }}</strong> {{ encryption }}</p>
      {% if password %}
        <p><strong>{{ w_password }}</strong> {{ password }}</p>
      {% else %}
        <p><strong>{{ w_open_network }}</strong></p>
      {% endif %}
    </div>

    {% if dynamic_url %}
      <p style="margin-top:1rem;">
        <strong>{{ w_dynamic }}</strong><br>
        <a href="{{ dynamic_url }}" target="_blank" rel="noopener">{{ dynamic_url }}</a>
      </p>
    {% endif %}

    <div class="qr-actions">
      {% if dynamic_url %}
        <a href="{{ dynamic_url }}" target="_blank" rel="noopener" class="btn-link no-print">{{ w_open_link }}</a>
      {% endif %}
      {% if qr and qr.image_path %}
        <a href="/{{ qr.image_path }}" download class="btn-link no-print">{{ w_download }}</a>
      {% endif %}
      <a href="#" class="btn-link no-print" onclick="return printQrFromSelector('.qr-preview')">{{ w_print }}</a>
    </div>
  </div>
</section>

<style>
/* ğŸŒ Allgemeines Layout */
.qr-result {
  max-width: 650px;
  margin: 3rem auto;
  background: #fff;
  padding: 2rem;
  border-radius: 20px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
  text-align: center;
  font-family: "Inter", system-ui, sans-serif;
}

.qr-result h1 {
  font-size: 1.9rem;
  color: #0D2A78;
  margin-bottom: 0.5rem;
}

.subtitle {
  color: #4B5563;
  font-size: 1rem;
  margin-bottom: 2rem;
}

/* ğŸ§© QR-Karte */
.qr-card {
  background: #f9fafb;
  border-radius: 16px;
  padding: 2rem;
  display: inline-block;
  text-align: center;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
}

.qr-preview {
  max-width: 240px;
  border-radius: 12px;
  margin: 1rem auto 1.5rem;
  display: block;
  background: #fff;
  padding: 0.5rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

.qr-info {
  text-align: left;
  display: inline-block;
  background: #fff;
  border-radius: 10px;
  padding: 1rem 1.5rem;
  margin-top: 0.5rem;
  box-shadow: inset 0 0 4px rgba(0,0,0,0.05);
}

.qr-info p {
  margin: 0.3rem 0;
  font-size: 0.95rem;
  color: #111827;
}

/* ğŸ–¨ï¸ Button */
.btn-link {
  display: inline-block;
  margin-top: 1.5rem;
  padding: 0.75rem 1.4rem;
  background: linear-gradient(135deg, #0D2A78, #1E40AF);
  color: white;
  text-decoration: none;
  border-radius: 10px;
  font-weight: 600;
  transition: all 0.2s ease;
}
.btn-link:hover {
  background: linear-gradient(135deg, #0B1742, #1E3A8A);
  transform: scale(1.02);
}
.qr-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  justify-content: center;
  margin-top: 1rem;
}

/* ğŸ–¨ï¸ Druckoptimierung */
@media print {
  body {
    background: white !important;
  }
  .no-print {
    display: none !important;
  }
  .qr-result {
    box-shadow: none !important;
    border: none !important;
    padding: 1rem !important;
    margin: 0 !important;
  }
}
</style>
{% endblock %}
