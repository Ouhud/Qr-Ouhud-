{% extends "base.html" %}
{% block title %}üì® E-Mail-QR-Code erstellt ‚Äì Ouhud QR{% endblock %}

{% block content %}
<section class="qr-result">
  <h1>‚úÖ E-Mail-QR-Code erfolgreich erstellt</h1>
  <p class="subtitle">
    Scanne den Code oder klicke unten, um deine E-Mail zu √∂ffnen oder den QR-Code herunterzuladen.
  </p>

  <div class="qr-card">
    <div class="qr-image-container">
      <img src="data:image/png;base64,{{ qr_image }}" alt="E-Mail QR-Code Vorschau" class="qr-image">
    </div>

    <div class="qr-details">
      <h2>{{ title }}</h2>
      <p class="email-link">
        <a href="{{ mailto_url }}" target="_blank">üìß E-Mail √∂ffnen</a>
      </p>
    </div>

    <div class="qr-actions">
      <a href="data:image/png;base64,{{ qr_image }}" download="email_qr.png" class="btn primary">‚¨áÔ∏è QR-Code herunterladen</a>
      <button onclick="printQR()" class="btn secondary">üñ®Ô∏è QR-Code drucken</button>
    </div>

    <div class="share-section">
      <h3>üîó Teilen oder einbetten</h3>
      <input type="text" id="qrLink" value="{{ request.url }}" readonly>
      <button onclick="copyLink()">üìã Kopieren</button>
    </div>
  </div>
</section>

<style>
/* === Allgemein === */
.qr-result {
  max-width: 850px;
  margin: 3rem auto;
  background: #fff;
  padding: 2.5rem;
  border-radius: 20px;
  box-shadow: 0 6px 25px rgba(0,0,0,0.08);
  text-align: center;
  font-family: "Inter", system-ui, sans-serif;
}
h1 {
  color: #0D2A78;
  font-size: 2rem;
  margin-bottom: 1rem;
}
.subtitle {
  color: #475569;
  margin-bottom: 2rem;
}
.qr-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
}

/* === QR Code === */
.qr-image-container {
  background: #f8fafc;
  padding: 1.5rem;
  border-radius: 16px;
  box-shadow: 0 3px 15px rgba(0,0,0,0.08);
}
.qr-image {
  width: 250px;
  height: 250px;
  border-radius: 10px;
}

/* === Titel und Link === */
.qr-details h2 {
  color: #0d2a78;
  font-size: 1.3rem;
  margin-top: 0.5rem;
}
.email-link a {
  color: #2563eb;
  text-decoration: none;
  font-weight: 600;
}
.email-link a:hover {
  text-decoration: underline;
}

/* === Buttons === */
.qr-actions {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  margin-top: 1rem;
}
.btn {
  padding: 0.9rem 1.6rem;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  border: none;
  text-decoration: none;
  display: inline-block;
}
.btn.primary {
  background: linear-gradient(135deg,#0D2A78,#2563EB);
  color: white;
}
.btn.primary:hover {
  background: linear-gradient(135deg,#0B1742,#1E40AF);
}
.btn.secondary {
  background: linear-gradient(135deg,#1E3A8A,#0D2A78);
  color: white;
}
.btn.secondary:hover {
  background: linear-gradient(135deg,#0D2A78,#1E3A8A);
}

/* === Teilen === */
.share-section {
  margin-top: 2rem;
  background: #f9fafb;
  padding: 1.2rem;
  border-radius: 10px;
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
}
.share-section h3 {
  color: #0D2A78;
  margin-bottom: 0.6rem;
}
#qrLink {
  width: 70%;
  padding: 0.6rem;
  border-radius: 8px;
  border: 1px solid #cbd5e1;
  font-size: 0.95rem;
  text-align: center;
  margin-right: 0.5rem;
}
.share-section button {
  background: #0D2A78;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 0.6rem 1rem;
  font-weight: 600;
  cursor: pointer;
}
.share-section button:hover {
  background: #1E40AF;
}

/* === Responsive === */
@media (max-width: 700px) {
  .qr-result { padding: 2rem 1.2rem; }
  .qr-image { width: 220px; height: 220px; }
  #qrLink { width: 100%; margin-bottom: 0.6rem; }
  .share-section button { width: 100%; }
}
</style>

<script>
function printQR() {
  const w = window.open();
  w.document.write('<img src="data:image/png;base64,{{ qr_image }}" style="width:300px">');
  w.print();
  w.close();
}
function copyLink() {
  const linkInput = document.getElementById('qrLink');
  linkInput.select();
  document.execCommand('copy');
  alert('üîó Link kopiert!');
}
</script>
{% endblock %}